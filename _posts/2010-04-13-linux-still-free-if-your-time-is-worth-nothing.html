--- 
layout: post
title: "Linux: still free if your time is worth nothing"
published: true
---
At work I use a Dell laptop running Ubuntu, and which for the most part has painless and certainly better than the alternative (modulo the fun of using an alternative OS in a windows enterprise environment).  A couple of months ago however, after an update, I finally restarted -- and realised that my network was no longer working.  We eventually realised that the ethernet interface had the wrong MAC address, which was odd because dmesg confirmed the kernel picking up the correct one, but ifconfig showed that eth0 and eth1 (the wireless card) had the same hardware address.  At any rate, using ifconfig to change it back to the correct value fixed things and away I went (note: this is actually because IPs where I work are assigned to registered MAC addresses; at home the wrong address was cheerily assigned an IP and worked fine).  Unfortunately, the problem was 100% repeatable: every time on reboot the wrong MAC was assigned and the network was useless.<p /> I suspected network-manager, but replacing it with wicd made no difference.  I suspected udev, but it was picking up the correct addresses too.<p />I later noticed that wireless was also no longer functioning correctly: I could see all the available networks, but not connect to any of them.  I didn&#39;t initially correlate the two problems.<p /> Eventually I noticed that the wireless card wasn&#39;t getting the right address either, and again changing this back to the correct one fixed things.  At this point on a hunch I searched for the bogus MAC (AA:00:04:00:0A:04) I was seeing... and it turns out to be a fairly common problem, for example <a href="http://ubuntuforums.org/showthread.php?t=465872">http://ubuntuforums.org/showthread.php?t=465872</a> and <a href="http://ubuntuforums.org/showthread.php?t=1268372">http://ubuntuforums.org/showthread.php?t=1268372</a> (although none offer a solution).  I did however find this post: <a href="http://blog.robertlee.name/2009/01/unicornscan-on-ubunto-some-updated.html">http://blog.robertlee.name/2009/01/unicornscan-on-ubunto-some-updated.html</a><p /> And that, believe it or not, fixed things: yes, remove libdnet (DECnet support) and suddenly I once more have two functioning network interfaces without requiring manual interference.  What?  (and why did I even have DECnet in the first place?)  I can honestly say I would not have tracked that down myself, and I still don&#39;t understand <i>why</i> -- but at this point I&#39;m just happy it works and hoping it doesn&#39;t come back.
